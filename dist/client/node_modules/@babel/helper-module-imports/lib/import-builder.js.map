{"version":3,"sources":["../../../../../../client/node_modules/@babel/helper-module-imports/lib/import-builder.js"],"names":["Object","defineProperty","exports","value","default","_assert","data","_interopRequireDefault","require","t","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","ImportBuilder","importedSource","scope","hub","_statements","_resultName","_scope","_hub","_importedSource","statements","resultName","push","importDeclaration","stringLiteral","expressionStatement","callExpression","identifier","name","generateUidIdentifier","statement","length","type","specifiers","importNamespaceSpecifier","cloneNode","importDefaultSpecifier","importName","importSpecifier","variableDeclaration","variableDeclarator","expression","_interop","addHelper","callee","declarations","init","fail","memberExpression"],"mappings":"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","file":"import-builder.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _assert() {\n  const data = _interopRequireDefault(require(\"assert\"));\n\n  _assert = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction t() {\n  const data = _interopRequireWildcard(require(\"@babel/types\"));\n\n  t = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass ImportBuilder {\n  constructor(importedSource, scope, hub) {\n    this._statements = [];\n    this._resultName = null;\n    this._scope = null;\n    this._hub = null;\n    this._scope = scope;\n    this._hub = hub;\n    this._importedSource = importedSource;\n  }\n\n  done() {\n    return {\n      statements: this._statements,\n      resultName: this._resultName\n    };\n  }\n\n  import() {\n    this._statements.push(t().importDeclaration([], t().stringLiteral(this._importedSource)));\n\n    return this;\n  }\n\n  require() {\n    this._statements.push(t().expressionStatement(t().callExpression(t().identifier(\"require\"), [t().stringLiteral(this._importedSource)])));\n\n    return this;\n  }\n\n  namespace(name = \"namespace\") {\n    name = this._scope.generateUidIdentifier(name);\n    const statement = this._statements[this._statements.length - 1];\n    (0, _assert().default)(statement.type === \"ImportDeclaration\");\n    (0, _assert().default)(statement.specifiers.length === 0);\n    statement.specifiers = [t().importNamespaceSpecifier(name)];\n    this._resultName = t().cloneNode(name);\n    return this;\n  }\n\n  default(name) {\n    name = this._scope.generateUidIdentifier(name);\n    const statement = this._statements[this._statements.length - 1];\n    (0, _assert().default)(statement.type === \"ImportDeclaration\");\n    (0, _assert().default)(statement.specifiers.length === 0);\n    statement.specifiers = [t().importDefaultSpecifier(name)];\n    this._resultName = t().cloneNode(name);\n    return this;\n  }\n\n  named(name, importName) {\n    if (importName === \"default\") return this.default(name);\n    name = this._scope.generateUidIdentifier(name);\n    const statement = this._statements[this._statements.length - 1];\n    (0, _assert().default)(statement.type === \"ImportDeclaration\");\n    (0, _assert().default)(statement.specifiers.length === 0);\n    statement.specifiers = [t().importSpecifier(name, t().identifier(importName))];\n    this._resultName = t().cloneNode(name);\n    return this;\n  }\n\n  var(name) {\n    name = this._scope.generateUidIdentifier(name);\n    let statement = this._statements[this._statements.length - 1];\n\n    if (statement.type !== \"ExpressionStatement\") {\n      (0, _assert().default)(this._resultName);\n      statement = t().expressionStatement(this._resultName);\n\n      this._statements.push(statement);\n    }\n\n    this._statements[this._statements.length - 1] = t().variableDeclaration(\"var\", [t().variableDeclarator(name, statement.expression)]);\n    this._resultName = t().cloneNode(name);\n    return this;\n  }\n\n  defaultInterop() {\n    return this._interop(this._hub.addHelper(\"interopRequireDefault\"));\n  }\n\n  wildcardInterop() {\n    return this._interop(this._hub.addHelper(\"interopRequireWildcard\"));\n  }\n\n  _interop(callee) {\n    const statement = this._statements[this._statements.length - 1];\n\n    if (statement.type === \"ExpressionStatement\") {\n      statement.expression = t().callExpression(callee, [statement.expression]);\n    } else if (statement.type === \"VariableDeclaration\") {\n      (0, _assert().default)(statement.declarations.length === 1);\n      statement.declarations[0].init = t().callExpression(callee, [statement.declarations[0].init]);\n    } else {\n      _assert().default.fail(\"Unexpected type.\");\n    }\n\n    return this;\n  }\n\n  prop(name) {\n    const statement = this._statements[this._statements.length - 1];\n\n    if (statement.type === \"ExpressionStatement\") {\n      statement.expression = t().memberExpression(statement.expression, t().identifier(name));\n    } else if (statement.type === \"VariableDeclaration\") {\n      (0, _assert().default)(statement.declarations.length === 1);\n      statement.declarations[0].init = t().memberExpression(statement.declarations[0].init, t().identifier(name));\n    } else {\n      _assert().default.fail(\"Unexpected type:\" + statement.type);\n    }\n\n    return this;\n  }\n\n  read(name) {\n    this._resultName = t().memberExpression(this._resultName, t().identifier(name));\n  }\n\n}\n\nexports.default = ImportBuilder;"]}