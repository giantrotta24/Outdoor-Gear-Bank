{"version":3,"sources":["../../../../../../client/node_modules/@babel/helper-create-class-features-plugin/lib/decorators.js"],"names":["Object","defineProperty","exports","value","hasOwnDecorators","hasDecorators","buildDecoratedClass","_core","data","require","_helperReplaceSupers","_interopRequireDefault","_helperFunctionName","obj","__esModule","default","node","decorators","length","body","some","prop","key","types","objectProperty","identifier","method","objectMethod","blockStatement","takeDecorators","result","arrayExpression","map","decorator","expression","undefined","getKey","computed","isIdentifier","stringLiteral","name","String","extractElementDescriptor","classRef","superRef","path","scope","isMethod","isClassMethod","isPrivate","buildCodeFrameError","methodPath","methodNode","objectRef","isStatic","static","file","replace","properties","kind","booleanLiteral","filter","Boolean","id","toExpression","push","template","statements","ast","buildUndefinedNode","remove","objectExpression","addDecorateHelper","addHelper","err","code","message","ref","elements","initializeId","generateUidIdentifier","isDeclaration","isStrict","isInStrictMode","superClass","type","cloneNode","superId","generateUidIdentifierBasedOnNode","classDecorators","definitions","bind","replacement","nullLiteral","classPathDesc","arguments","directives","directive","directiveLiteral","instanceNodes","statement","wrapClass","replaceWith","get"],"mappings":"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","file":"decorators.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hasOwnDecorators = hasOwnDecorators;\nexports.hasDecorators = hasDecorators;\nexports.buildDecoratedClass = buildDecoratedClass;\n\nfunction _core() {\n  const data = require(\"@babel/core\");\n\n  _core = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _helperReplaceSupers() {\n  const data = _interopRequireDefault(require(\"@babel/helper-replace-supers\"));\n\n  _helperReplaceSupers = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _helperFunctionName() {\n  const data = _interopRequireDefault(require(\"@babel/helper-function-name\"));\n\n  _helperFunctionName = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction hasOwnDecorators(node) {\n  return !!(node.decorators && node.decorators.length);\n}\n\nfunction hasDecorators(node) {\n  return hasOwnDecorators(node) || node.body.body.some(hasOwnDecorators);\n}\n\nfunction prop(key, value) {\n  if (!value) return null;\n  return _core().types.objectProperty(_core().types.identifier(key), value);\n}\n\nfunction method(key, body) {\n  return _core().types.objectMethod(\"method\", _core().types.identifier(key), [], _core().types.blockStatement(body));\n}\n\nfunction takeDecorators(node) {\n  let result;\n\n  if (node.decorators && node.decorators.length > 0) {\n    result = _core().types.arrayExpression(node.decorators.map(decorator => decorator.expression));\n  }\n\n  node.decorators = undefined;\n  return result;\n}\n\nfunction getKey(node) {\n  if (node.computed) {\n    return node.key;\n  } else if (_core().types.isIdentifier(node.key)) {\n    return _core().types.stringLiteral(node.key.name);\n  } else {\n    return _core().types.stringLiteral(String(node.key.value));\n  }\n}\n\nfunction extractElementDescriptor(classRef, superRef, path) {\n  const {\n    node,\n    scope\n  } = path;\n  const isMethod = path.isClassMethod();\n\n  if (path.isPrivate()) {\n    throw path.buildCodeFrameError(`Private ${isMethod ? \"methods\" : \"fields\"} in decorated classes are not supported yet.`);\n  }\n\n  new (_helperReplaceSupers().default)({\n    methodPath: path,\n    methodNode: node,\n    objectRef: classRef,\n    isStatic: node.static,\n    superRef,\n    scope,\n    file: this\n  }, true).replace();\n  const properties = [prop(\"kind\", _core().types.stringLiteral(isMethod ? node.kind : \"field\")), prop(\"decorators\", takeDecorators(node)), prop(\"static\", node.static && _core().types.booleanLiteral(true)), prop(\"key\", getKey(node))].filter(Boolean);\n\n  if (isMethod) {\n    const id = node.computed ? null : node.key;\n\n    _core().types.toExpression(node);\n\n    properties.push(prop(\"value\", (0, _helperFunctionName().default)({\n      node,\n      id,\n      scope\n    }) || node));\n  } else if (node.value) {\n    properties.push(method(\"value\", _core().template.statements.ast`return ${node.value}`));\n  } else {\n    properties.push(prop(\"value\", scope.buildUndefinedNode()));\n  }\n\n  path.remove();\n  return _core().types.objectExpression(properties);\n}\n\nfunction addDecorateHelper(file) {\n  try {\n    return file.addHelper(\"decorate\");\n  } catch (err) {\n    if (err.code === \"BABEL_HELPER_UNKNOWN\") {\n      err.message += \"\\n  '@babel/plugin-transform-decorators' in non-legacy mode\" + \" requires '@babel/core' version ^7.0.2 and you appear to be using\" + \" an older version.\";\n    }\n\n    throw err;\n  }\n}\n\nfunction buildDecoratedClass(ref, path, elements, file) {\n  const {\n    node,\n    scope\n  } = path;\n  const initializeId = scope.generateUidIdentifier(\"initialize\");\n  const isDeclaration = node.id && path.isDeclaration();\n  const isStrict = path.isInStrictMode();\n  const {\n    superClass\n  } = node;\n  node.type = \"ClassDeclaration\";\n  if (!node.id) node.id = _core().types.cloneNode(ref);\n  let superId;\n\n  if (superClass) {\n    superId = scope.generateUidIdentifierBasedOnNode(node.superClass, \"super\");\n    node.superClass = superId;\n  }\n\n  const classDecorators = takeDecorators(node);\n\n  const definitions = _core().types.arrayExpression(elements.map(extractElementDescriptor.bind(file, node.id, superId)));\n\n  let replacement = _core().template.expression.ast`\n    ${addDecorateHelper(file)}(\n      ${classDecorators || _core().types.nullLiteral()},\n      function (${initializeId}, ${superClass ? superId : null}) {\n        ${node}\n        return { F: ${_core().types.cloneNode(node.id)}, d: ${definitions} };\n      },\n      ${superClass}\n    )\n  `;\n  let classPathDesc = \"arguments.1.body.body.0\";\n\n  if (!isStrict) {\n    replacement.arguments[1].body.directives.push(_core().types.directive(_core().types.directiveLiteral(\"use strict\")));\n  }\n\n  if (isDeclaration) {\n    replacement = _core().template.ast`let ${ref} = ${replacement}`;\n    classPathDesc = \"declarations.0.init.\" + classPathDesc;\n  }\n\n  return {\n    instanceNodes: [_core().template.statement.ast`${initializeId}(this)`],\n\n    wrapClass(path) {\n      path.replaceWith(replacement);\n      return path.get(classPathDesc);\n    }\n\n  };\n}"]}