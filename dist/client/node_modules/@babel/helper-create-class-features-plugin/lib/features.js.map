{"version":3,"sources":["../../../../../../client/node_modules/@babel/helper-create-class-features-plugin/lib/features.js"],"names":["Object","defineProperty","exports","value","enableFeature","isLoose","verifyUsedFeatures","FEATURES","_decorators","require","freeze","fields","privateMethods","decorators","featuresKey","looseKey","file","feature","loose","hasFeature","set","get","path","hasOwnDecorators","node","buildCodeFrameError","isPrivate","isClassMethod","isMethod","static","kind","isProperty"],"mappings":"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","file":"features.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enableFeature = enableFeature;\nexports.isLoose = isLoose;\nexports.verifyUsedFeatures = verifyUsedFeatures;\nexports.FEATURES = void 0;\n\nvar _decorators = require(\"./decorators\");\n\nconst FEATURES = Object.freeze({\n  fields: 1 << 1,\n  privateMethods: 1 << 2,\n  decorators: 1 << 3\n});\nexports.FEATURES = FEATURES;\nconst featuresKey = \"@babel/plugin-class-features/featuresKey\";\nconst looseKey = \"@babel/plugin-class-features/looseKey\";\n\nfunction enableFeature(file, feature, loose) {\n  if (!hasFeature(file, feature)) {\n    file.set(featuresKey, file.get(featuresKey) | feature);\n    if (loose) file.set(looseKey, file.get(looseKey) | feature);\n  }\n}\n\nfunction hasFeature(file, feature) {\n  return !!(file.get(featuresKey) & feature);\n}\n\nfunction isLoose(file, feature) {\n  return !!(file.get(looseKey) & feature);\n}\n\nfunction verifyUsedFeatures(path, file) {\n  if ((0, _decorators.hasOwnDecorators)(path.node)) {\n    if (!hasFeature(file, FEATURES.decorators)) {\n      throw path.buildCodeFrameError(\"Decorators are not enabled.\" + \"\\nIf you are using \" + '[\"@babel/plugin-proposal-decorators\", { \"legacy\": true }], ' + 'make sure it comes *before* \"@babel/plugin-proposal-class-properties\" ' + \"and enable loose mode, like so:\\n\" + '\\t[\"@babel/plugin-proposal-decorators\", { \"legacy\": true }]\\n' + '\\t[\"@babel/plugin-proposal-class-properties\", { \"loose\": true }]');\n    }\n\n    if (path.isPrivate()) {\n      throw path.buildCodeFrameError(`Private ${path.isClassMethod() ? \"methods\" : \"fields\"} in decorated classes are not supported yet.`);\n    }\n  }\n\n  if (path.isPrivate() && path.isMethod()) {\n    if (!hasFeature(file, FEATURES.privateMethods)) {\n      throw path.buildCodeFrameError(\"Class private methods are not enabled.\");\n    }\n\n    if (path.node.static && path.node.kind !== \"method\") {\n      throw path.buildCodeFrameError(\"@babel/plugin-class-features doesn't support class static private accessors yet.\");\n    }\n  }\n\n  if (hasFeature(file, FEATURES.privateMethods) && hasFeature(file, FEATURES.fields) && isLoose(file, FEATURES.privateMethods) !== isLoose(file, FEATURES.fields)) {\n    throw path.buildCodeFrameError(\"'loose' mode configuration must be the same for both @babel/plugin-proposal-class-properties \" + \"and @babel/plugin-proposal-private-methods\");\n  }\n\n  if (path.isProperty()) {\n    if (!hasFeature(file, FEATURES.fields)) {\n      throw path.buildCodeFrameError(\"Class fields are not enabled.\");\n    }\n  }\n}"]}