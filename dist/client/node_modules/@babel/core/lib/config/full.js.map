{"version":3,"sources":["../../../../../../../client/node_modules/@babel/core/lib/config/full.js"],"names":["Object","defineProperty","exports","value","default","loadFullConfig","_util","require","context","_interopRequireWildcard","_plugin","_interopRequireDefault","_item","_configChain","_traverse","data","_caching","_options","_plugins","_configApi","_partial","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","inputOpts","result","options","optionDefaults","passes","plugins","presets","Error","ignored","recurseDescriptors","config","pass","reduce","acc","descriptor","push","loadPluginDescriptor","preset","loadPresetDescriptor","ownPass","length","splice","map","o","filter","p","_ref","forEach","mergeOptions","opts","unshift","getItemDescriptor","item","e","test","message","filename","slice","passPerPreset","loadDescriptor","makeWeakCache","cache","dirname","alias","api","assign","JSON","stringify","then","instantiatePlugin","pluginObj","validatePluginObject","plugin","visitor","explode","inherits","inheritsDescriptor","name","undefined","invalidate","pre","chain","post","manipulateOptions","visitors","merge","buildPresetChain","instantiatePreset","validate","a","b","fns","Boolean","args","fn","apply"],"mappings":"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","file":"full.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loadFullConfig;\n\nvar _util = require(\"./util\");\n\nvar context = _interopRequireWildcard(require(\"../index\"));\n\nvar _plugin = _interopRequireDefault(require(\"./plugin\"));\n\nvar _item = require(\"./item\");\n\nvar _configChain = require(\"./config-chain\");\n\nfunction _traverse() {\n  const data = _interopRequireDefault(require(\"@babel/traverse\"));\n\n  _traverse = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _caching = require(\"./caching\");\n\nvar _options = require(\"./validation/options\");\n\nvar _plugins = require(\"./validation/plugins\");\n\nvar _configApi = _interopRequireDefault(require(\"./helpers/config-api\"));\n\nvar _partial = _interopRequireDefault(require(\"./partial\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction loadFullConfig(inputOpts) {\n  const result = (0, _partial.default)(inputOpts);\n\n  if (!result) {\n    return null;\n  }\n\n  const {\n    options,\n    context\n  } = result;\n  const optionDefaults = {};\n  const passes = [[]];\n\n  try {\n    const {\n      plugins,\n      presets\n    } = options;\n\n    if (!plugins || !presets) {\n      throw new Error(\"Assertion failure - plugins and presets exist\");\n    }\n\n    const ignored = function recurseDescriptors(config, pass) {\n      const plugins = config.plugins.reduce((acc, descriptor) => {\n        if (descriptor.options !== false) {\n          acc.push(loadPluginDescriptor(descriptor, context));\n        }\n\n        return acc;\n      }, []);\n      const presets = config.presets.reduce((acc, descriptor) => {\n        if (descriptor.options !== false) {\n          acc.push({\n            preset: loadPresetDescriptor(descriptor, context),\n            pass: descriptor.ownPass ? [] : pass\n          });\n        }\n\n        return acc;\n      }, []);\n\n      if (presets.length > 0) {\n        passes.splice(1, 0, ...presets.map(o => o.pass).filter(p => p !== pass));\n\n        for (const _ref of presets) {\n          const {\n            preset,\n            pass\n          } = _ref;\n          if (!preset) return true;\n          const ignored = recurseDescriptors({\n            plugins: preset.plugins,\n            presets: preset.presets\n          }, pass);\n          if (ignored) return true;\n          preset.options.forEach(opts => {\n            (0, _util.mergeOptions)(optionDefaults, opts);\n          });\n        }\n      }\n\n      if (plugins.length > 0) {\n        pass.unshift(...plugins);\n      }\n    }({\n      plugins: plugins.map(item => {\n        const desc = (0, _item.getItemDescriptor)(item);\n\n        if (!desc) {\n          throw new Error(\"Assertion failure - must be config item\");\n        }\n\n        return desc;\n      }),\n      presets: presets.map(item => {\n        const desc = (0, _item.getItemDescriptor)(item);\n\n        if (!desc) {\n          throw new Error(\"Assertion failure - must be config item\");\n        }\n\n        return desc;\n      })\n    }, passes[0]);\n\n    if (ignored) return null;\n  } catch (e) {\n    if (!/^\\[BABEL\\]/.test(e.message)) {\n      e.message = `[BABEL] ${context.filename || \"unknown\"}: ${e.message}`;\n    }\n\n    throw e;\n  }\n\n  const opts = optionDefaults;\n  (0, _util.mergeOptions)(opts, options);\n  opts.plugins = passes[0];\n  opts.presets = passes.slice(1).filter(plugins => plugins.length > 0).map(plugins => ({\n    plugins\n  }));\n  opts.passPerPreset = opts.presets.length > 0;\n  return {\n    options: opts,\n    passes: passes\n  };\n}\n\nconst loadDescriptor = (0, _caching.makeWeakCache)(({\n  value,\n  options,\n  dirname,\n  alias\n}, cache) => {\n  if (options === false) throw new Error(\"Assertion failure\");\n  options = options || {};\n  let item = value;\n\n  if (typeof value === \"function\") {\n    const api = Object.assign({}, context, (0, _configApi.default)(cache));\n\n    try {\n      item = value(api, options, dirname);\n    } catch (e) {\n      if (alias) {\n        e.message += ` (While processing: ${JSON.stringify(alias)})`;\n      }\n\n      throw e;\n    }\n  }\n\n  if (!item || typeof item !== \"object\") {\n    throw new Error(\"Plugin/Preset did not return an object.\");\n  }\n\n  if (typeof item.then === \"function\") {\n    throw new Error(`You appear to be using an async plugin, ` + `which your current version of Babel does not support.` + `If you're using a published plugin, ` + `you may need to upgrade your @babel/core version.`);\n  }\n\n  return {\n    value: item,\n    options,\n    dirname,\n    alias\n  };\n});\n\nfunction loadPluginDescriptor(descriptor, context) {\n  if (descriptor.value instanceof _plugin.default) {\n    if (descriptor.options) {\n      throw new Error(\"Passed options to an existing Plugin instance will not work.\");\n    }\n\n    return descriptor.value;\n  }\n\n  return instantiatePlugin(loadDescriptor(descriptor, context), context);\n}\n\nconst instantiatePlugin = (0, _caching.makeWeakCache)(({\n  value,\n  options,\n  dirname,\n  alias\n}, cache) => {\n  const pluginObj = (0, _plugins.validatePluginObject)(value);\n  const plugin = Object.assign({}, pluginObj);\n\n  if (plugin.visitor) {\n    plugin.visitor = _traverse().default.explode(Object.assign({}, plugin.visitor));\n  }\n\n  if (plugin.inherits) {\n    const inheritsDescriptor = {\n      name: undefined,\n      alias: `${alias}$inherits`,\n      value: plugin.inherits,\n      options,\n      dirname\n    };\n    const inherits = cache.invalidate(data => loadPluginDescriptor(inheritsDescriptor, data));\n    plugin.pre = chain(inherits.pre, plugin.pre);\n    plugin.post = chain(inherits.post, plugin.post);\n    plugin.manipulateOptions = chain(inherits.manipulateOptions, plugin.manipulateOptions);\n    plugin.visitor = _traverse().default.visitors.merge([inherits.visitor || {}, plugin.visitor || {}]);\n  }\n\n  return new _plugin.default(plugin, options, alias);\n});\n\nconst loadPresetDescriptor = (descriptor, context) => {\n  return (0, _configChain.buildPresetChain)(instantiatePreset(loadDescriptor(descriptor, context)), context);\n};\n\nconst instantiatePreset = (0, _caching.makeWeakCache)(({\n  value,\n  dirname,\n  alias\n}) => {\n  return {\n    options: (0, _options.validate)(\"preset\", value),\n    alias,\n    dirname\n  };\n});\n\nfunction chain(a, b) {\n  const fns = [a, b].filter(Boolean);\n  if (fns.length <= 1) return fns[0];\n  return function (...args) {\n    for (const fn of fns) {\n      fn.apply(this, args);\n    }\n  };\n}"]}