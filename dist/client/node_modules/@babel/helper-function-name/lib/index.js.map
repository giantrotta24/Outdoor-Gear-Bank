{"version":3,"sources":["../../../../../../client/node_modules/@babel/helper-function-name/lib/index.js"],"names":["Object","defineProperty","exports","value","default","_default","_helperGetFunctionArity","data","_interopRequireDefault","require","_template","t","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","buildPropertyMethodAssignmentWrapper","buildGeneratorPropertyMethodAssignmentWrapper","visitor","path","state","node","name","localDeclar","scope","getBindingIdentifier","outerDeclar","selfReference","stop","getNameFromLiteralId","id","isNullLiteral","isRegExpLiteral","pattern","flags","isTemplateLiteral","quasis","map","quasi","raw","join","undefined","wrap","method","hasBinding","hasGlobal","rename","isFunction","build","generator","template","FUNCTION","FUNCTION_ID","FUNCTION_KEY","generateUidIdentifier","expression","params","callee","body","i","len","push","getProgramParent","references","visit","selfAssignment","binding","getOwnBinding","kind","traverse","parent","localBinding","isObjectProperty","isObjectMethod","computed","isLiteral","isVariableDeclarator","isIdentifier","getBinding","constant","cloneNode","NOT_LOCAL_BINDING","isAssignmentExpression","left","toBindingIdentifierName","identifier"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nfunction _helperGetFunctionArity() {\n  const data = _interopRequireDefault(require(\"@babel/helper-get-function-arity\"));\n\n  _helperGetFunctionArity = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _template() {\n  const data = _interopRequireDefault(require(\"@babel/template\"));\n\n  _template = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction t() {\n  const data = _interopRequireWildcard(require(\"@babel/types\"));\n\n  t = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst buildPropertyMethodAssignmentWrapper = (0, _template().default)(`\n  (function (FUNCTION_KEY) {\n    function FUNCTION_ID() {\n      return FUNCTION_KEY.apply(this, arguments);\n    }\n\n    FUNCTION_ID.toString = function () {\n      return FUNCTION_KEY.toString();\n    }\n\n    return FUNCTION_ID;\n  })(FUNCTION)\n`);\nconst buildGeneratorPropertyMethodAssignmentWrapper = (0, _template().default)(`\n  (function (FUNCTION_KEY) {\n    function* FUNCTION_ID() {\n      return yield* FUNCTION_KEY.apply(this, arguments);\n    }\n\n    FUNCTION_ID.toString = function () {\n      return FUNCTION_KEY.toString();\n    };\n\n    return FUNCTION_ID;\n  })(FUNCTION)\n`);\nconst visitor = {\n  \"ReferencedIdentifier|BindingIdentifier\"(path, state) {\n    if (path.node.name !== state.name) return;\n    const localDeclar = path.scope.getBindingIdentifier(state.name);\n    if (localDeclar !== state.outerDeclar) return;\n    state.selfReference = true;\n    path.stop();\n  }\n\n};\n\nfunction getNameFromLiteralId(id) {\n  if (t().isNullLiteral(id)) {\n    return \"null\";\n  }\n\n  if (t().isRegExpLiteral(id)) {\n    return `_${id.pattern}_${id.flags}`;\n  }\n\n  if (t().isTemplateLiteral(id)) {\n    return id.quasis.map(quasi => quasi.value.raw).join(\"\");\n  }\n\n  if (id.value !== undefined) {\n    return id.value + \"\";\n  }\n\n  return \"\";\n}\n\nfunction wrap(state, method, id, scope) {\n  if (state.selfReference) {\n    if (scope.hasBinding(id.name) && !scope.hasGlobal(id.name)) {\n      scope.rename(id.name);\n    } else {\n      if (!t().isFunction(method)) return;\n      let build = buildPropertyMethodAssignmentWrapper;\n\n      if (method.generator) {\n        build = buildGeneratorPropertyMethodAssignmentWrapper;\n      }\n\n      const template = build({\n        FUNCTION: method,\n        FUNCTION_ID: id,\n        FUNCTION_KEY: scope.generateUidIdentifier(id.name)\n      }).expression;\n      const params = template.callee.body.body[0].params;\n\n      for (let i = 0, len = (0, _helperGetFunctionArity().default)(method); i < len; i++) {\n        params.push(scope.generateUidIdentifier(\"x\"));\n      }\n\n      return template;\n    }\n  }\n\n  method.id = id;\n  scope.getProgramParent().references[id.name] = true;\n}\n\nfunction visit(node, name, scope) {\n  const state = {\n    selfAssignment: false,\n    selfReference: false,\n    outerDeclar: scope.getBindingIdentifier(name),\n    references: [],\n    name: name\n  };\n  const binding = scope.getOwnBinding(name);\n\n  if (binding) {\n    if (binding.kind === \"param\") {\n      state.selfReference = true;\n    } else {}\n  } else if (state.outerDeclar || scope.hasGlobal(name)) {\n    scope.traverse(node, visitor, state);\n  }\n\n  return state;\n}\n\nfunction _default({\n  node,\n  parent,\n  scope,\n  id\n}, localBinding = false) {\n  if (node.id) return;\n\n  if ((t().isObjectProperty(parent) || t().isObjectMethod(parent, {\n    kind: \"method\"\n  })) && (!parent.computed || t().isLiteral(parent.key))) {\n    id = parent.key;\n  } else if (t().isVariableDeclarator(parent)) {\n    id = parent.id;\n\n    if (t().isIdentifier(id) && !localBinding) {\n      const binding = scope.parent.getBinding(id.name);\n\n      if (binding && binding.constant && scope.getBinding(id.name) === binding) {\n        node.id = t().cloneNode(id);\n        node.id[t().NOT_LOCAL_BINDING] = true;\n        return;\n      }\n    }\n  } else if (t().isAssignmentExpression(parent)) {\n    id = parent.left;\n  } else if (!id) {\n    return;\n  }\n\n  let name;\n\n  if (id && t().isLiteral(id)) {\n    name = getNameFromLiteralId(id);\n  } else if (id && t().isIdentifier(id)) {\n    name = id.name;\n  }\n\n  if (name === undefined) {\n    return;\n  }\n\n  name = t().toBindingIdentifierName(name);\n  id = t().identifier(name);\n  id[t().NOT_LOCAL_BINDING] = true;\n  const state = visit(node, name, scope);\n  return wrap(state, node, id, scope) || node;\n}"]}